<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Beiko Lab" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Subsampling - ARETE</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Subsampling";
        var mkdocs_page_input_path = "subsampling.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> ARETE
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../usage/">Usage</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../faq/">FAQ</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../output/">Output</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../CITATIONS/">Citations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../ROADMAP/">Roadmap</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Reference</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../params/">Parameters</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Subsampling</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#example-command">Example command</a>
    </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">ARETE</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
          <li>Reference &raquo;</li>
      <li class="breadcrumb-item active">Subsampling</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/beiko-lab/arete/edit/master/docs/subsampling.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="poppunk-subsetting">PopPUNK subsetting</h2>
<p>The subsampling subworkflow is executed if you want
to reduce the number of genomes that get added to the phylogenomics subworkflow.
By reducing the number of genomes, you can potentially reduce resource requirements for the pangenomics and phylogenomics tools.</p>
<p>To enable this subworkflow, add <code>--enable_subsetting</code> when running beiko-lab/ARETE.
This will subset genomes based on their core genome similarity and accessory genome similarity, as calculated via their PopPUNK distances.</p>
<p>By default, the threshold is <code>--core_similarity 99.9</code> and <code>--accessory_similarity 99</code>. But these
can be changed by adding these parameters to your execution. What happens then is if any pair of genomes is this similar, only one genome from this pair will
be included in the phylogenomic section. All of the removed genome IDs will be present under <code>poppunk_results/removed_genomes.txt</code>.</p>
<p>By adding <code>--enable_subsetting</code>, you'll be adding two processes to the execution DAG:</p>
<ul>
<li>POPPUNK_EXTRACT_DISTANCES: This process will extract pair-wise distances between all genomes, returning a table under <code>poppunk_results/distances/</code>. This table will be used to perform the subsetting.</li>
<li>MAKE_HEATMAP: This process will create a heatmap showing different similarity thresholds and the number of genomes that'd be present in each of the possible subsets. It'll also be under <code>poppunk_results/distances/</code>.</li>
</ul>
<h3 id="example-command">Example command</h3>
<p>The command below will execute the 'annotation' ARETE entry with subsetting enabled,
with a core similarity threshold of 99% and an accessory similarity of 95%.</p>
<pre><code>nextflow run beiko-lab/ARETE \
  --input_sample_table samplesheet.csv \
  --enable_subsetting \
  --core_similarity 99 \
  --accessory_similarity 95 \
  -profile docker \
  -entry annotation
</code></pre>
<p>Be sure to not include <code>--skip_poppunk</code> in your command, because that will then disable all PopPUNK-related processes, including the subsetting subworkflow.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../params/" class="btn btn-neutral float-left" title="Parameters"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/beiko-lab/arete" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../params/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
