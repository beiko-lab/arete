<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Beiko Lab" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Known issues - ARETE</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Known issues";
        var mkdocs_page_input_path = "issues.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> ARETE
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../usage/">Usage</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../faq/">FAQ</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../output/">Output</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Known issues</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#poppunk">PopPUNK</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#rspr">rSPR</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../CITATIONS/">Citations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../ROADMAP/">Roadmap</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../contributing/">Contributing</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Reference</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../resource_profiles/">Dataset Size</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../params/">Parameters</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../subsampling/">Subsampling</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">ARETE</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Known issues</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/beiko-lab/arete/edit/master/docs/issues.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="known-issues-in-arete">Known issues in ARETE</h1>
<h2 id="poppunk">PopPUNK</h2>
<p>We have experienced issues with PopPUNK in ARETE runs, primarily related to the distances and clusters generated and how these affect both the <strong>subsampling</strong> and <strong>recombination</strong> subworkflows.</p>
<p>Sometimes the distances generated are too small or the number of clusters changes between executions of the same dataset.
While we can't solve the latter since it is a result of how PopPUNK itself is defined, the former can be mitigated by adjusting the subsampling thresholds with <code>--core_similarity</code> (99.9 by default) and <code>--accessory_similarity</code> (99 by default), or disabling subsampling altogether (<code>--enable_subsetting false</code>).</p>
<p>A useful course of action is to first run your dataset through the <a href="https://beiko-lab.github.io/arete/usage/#poppunk-entry">PopPUNK entry</a>, and then choose the appropriate parameters for your final pipeline run.
The PopPUNK entry takes at most 2 hours to run, even on <a href="https://beiko-lab.github.io/arete/resource_profiles/">large datasets</a>.
Disabling PopPUNK in your execution is also simple to do with <code>--skip_poppunk</code>.</p>
<h2 id="rspr">rSPR</h2>
<p>rSPR, which you can enable with <code>--run_rspr</code> or with the <a href="https://beiko-lab.github.io/arete/usage/#rspr-entry">rSPR entry</a>, is known to be <strong>very slow</strong>, especially with larger datasets.</p>
<p>The default of 3 days for rSPR runtimes should be enough for some runs, but for most larger datasets it won't be sufficient. In this case, if you do want to run rSPR, we suggest two possible routes:</p>
<ul>
<li>Increasing the default time allocation for the <code>RSPR_EXACT</code> processes. <a href="https://beiko-lab.github.io/arete/usage/#custom-resource-requests">Check out how</a>.</li>
<li>Ignoring timeout errors altogether and finish the pipeline execution with whatever finished running in these 3 days. <strong>This is the default course of action for ARETE</strong>.</li>
</ul>
<p>By choosing the second course of action, we ignore timeout errors generated with <code>RSPR_EXACT</code> and finish the execution of downstream processes, i.e. <code>RSPR_HEATMAP</code>, with whatever results we already have.
This process generates a heatmap of Tree size and Exact rSPR distance.</p>
<p>While <code>RSPR_HEATMAP</code> should execute with the results that were generated up to the timeout, we have heard from users that this process can still not run, even when results from <code>RSPR_EXACT</code> were generated. <strong>This issue has only been reported with older versions of nextflow, v23 onwards should work fine</strong>.</p>
<p>While this issue is unfortunate it shouldn't be a big problem: The only output given by <code>RSPR_HEATMAP</code> is the aforementioned heatmap, which can also be generated externally by using our <a href="https://github.com/beiko-lab/arete/blob/master/bin/rspr_heatmap.py"><code>rspr_heatmap.py</code></a> script or your own downstream analysis.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../output/" class="btn btn-neutral float-left" title="Output"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../CITATIONS/" class="btn btn-neutral float-right" title="Citations">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/beiko-lab/arete" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../output/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../CITATIONS/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
